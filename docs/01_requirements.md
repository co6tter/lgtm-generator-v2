# 要件定義書

**バージョン**: 1.2
**作成日**: 2025-11-08
**プロジェクト名**: LGTM Generator v2

---

## 1. プロジェクト概要

### 1.1 目的
開発者が Pull Request のレビュー時に使用する LGTM (Looks Good To Me) 画像を簡単に生成・共有できる Web アプリケーションを提供する。

### 1.2 ビジョン
- 無料で使える LGTM 画像生成ツール
- 直感的な UI で誰でも簡単に使える
- GitHub、GitLab などのマークダウンですぐに使える形式で提供

### 1.3 対象ユーザー
- ソフトウェアエンジニア
- コードレビュアー
- GitHub/GitLab ユーザー

---

## 2. 機能要件

### 2.1 必須機能 (MVP)

#### F-001: 画像検索機能
- **説明**: ユーザーがキーワードで画像を検索できる
- **入力**: 検索キーワード (テキスト)、検索ソース選択
- **出力**: 検索結果の画像一覧
- **検索ソース（Phase 1 - MVP）**:
  - **Unsplash**: 高品質な写真、無料 API（50リクエスト/時間）
  - **Pexels**: 高品質な写真、無料 API（200リクエスト/時間）
  - **Pixabay**: 写真 + イラスト対応、無料 API（5,000リクエスト/時間）
- **検索ソース（Phase 2 - 将来追加）**:
  - **Google画像検索**: Google Custom Search API（100クエリ/日、GCP登録必要）
    - より多様な画像（アニメキャラ、芸能人など）に対応
    - ユーザー数と利用状況を見て追加判断
- **UI**:
  - タブ切り替え: 「写真」「イラスト」などカテゴリ別表示
  - または、検索ソースドロップダウンで選択
- **制約**:
  - 1 ページあたり 20-30 件表示
  - ページネーション対応

#### F-002: LGTM テキスト合成機能
- **説明**: 選択した画像に "LGTM" テキストを重ねて表示
- **入力**: 選択された画像
- **出力**: LGTM テキストが重ねられた画像プレビュー
- **仕様**:
  - テキスト位置: 中央
  - フォント: 太字、視認性の高いフォント
  - テキストカラー: 白 (背景に黒の影付き)
  - テキストサイズ: レスポンシブ対応

#### F-003: マークダウンコピー機能
- **説明**: 生成した画像を GitHub/GitLab で使用できるマークダウン形式でコピー
- **入力**: 生成された LGTM 画像
- **出力**: クリップボードにコピーされたマークダウンテキスト
- **形式**: `![LGTM](画像URL)`

#### F-004: 画像ダウンロード機能
- **説明**: 生成した LGTM 画像をローカルにダウンロード
- **入力**: 生成された LGTM 画像
- **出力**: ダウンロードされた画像ファイル (PNG/JPG)
- **ファイル名**: `lgtm-{timestamp}.png`

### 2.2 今後検討する機能（Phase 2以降）

#### F-101: Google画像検索対応
- Google Custom Search API を使用した画像検索
- アニメキャラ、芸能人など、より多様な画像に対応
- 利用状況を見て段階的に追加

#### F-102: カスタムテキスト機能
- LGTM 以外のテキストを入力可能
- テキストサイズ、カラー、位置の調整

#### F-103: お気に入り機能
- よく使う画像を保存 (ローカルストレージ)

#### F-104: 履歴機能
- 過去に生成した LGTM 画像の履歴表示

#### F-105: SNS シェア機能
- Twitter, Slack などへの直接シェア

---

## 3. 非機能要件

### 3.1 パフォーマンス
- **NFR-001**: 画像検索結果の表示は 3 秒以内
- **NFR-002**: LGTM 画像生成は 1 秒以内
- **NFR-003**: First Contentful Paint (FCP) は 1.5 秒以内

### 3.2 可用性
- **NFR-004**: アップタイム 99% 以上 (無料ホスティングの範囲内)
- **NFR-005**: API エラー時の適切なフォールバック表示

### 3.3 ユーザビリティ
- **NFR-006**: モバイル対応 (レスポンシブデザイン)
- **NFR-007**: アクセシビリティ WCAG 2.1 Level A 準拠
- **NFR-008**: 主要ブラウザ対応 (Chrome, Firefox, Safari, Edge 最新版)

### 3.4 セキュリティ
- **NFR-009**: HTTPS 通信必須
- **NFR-010**: XSS 対策実装
- **NFR-011**: API キーの安全な管理 (環境変数)

### 3.5 保守性
- **NFR-012**: TypeScript による型安全性
- **NFR-013**: コンポーネント単位でのモジュール化
- **NFR-014**: ESLint/Prettier によるコード品質維持

---

## 4. 技術スタック

### 4.1 フロントエンド
- **フレームワーク**: Next.js 14+ (App Router)
- **言語**: TypeScript
- **UI ライブラリ**: React 18+
- **スタイリング**: Tailwind CSS
- **状態管理**: React Hooks (useState, useContext)

### 4.2 バックエンド
- **API Routes**: Next.js API Routes
- **画像処理**: Canvas API / html2canvas

### 4.3 外部 API

#### Phase 1（MVP）で使用する画像検索 API

**Unsplash API**
- リクエスト制限: 50リクエスト/時間
- 開発者登録: 必要（簡単）
- 特徴: 高品質な写真、商用利用可能
- ドキュメント: https://unsplash.com/developers

**Pexels API**
- リクエスト制限: 200リクエスト/時間
- 開発者登録: 必要（簡単）
- 特徴: 高品質な写真、商用利用可能
- ドキュメント: https://www.pexels.com/api/

**Pixabay API**
- リクエスト制限: 5,000リクエスト/時間
- 開発者登録: 必要（簡単）
- 特徴: 写真＋イラスト対応、アニメ系画像も含む
- ドキュメント: https://pixabay.com/api/docs/

#### Phase 2（将来）で追加検討する API

**Google Custom Search API**
- リクエスト制限: 100クエリ/日（無料プラン）
- 開発者登録: Google Cloud Platform 必要
- API キー + Custom Search Engine ID が必要
- 特徴: Google画像検索結果、アニメキャラ・芸能人など網羅的
- ドキュメント: https://developers.google.com/custom-search
- 追加条件: ユーザー数と利用状況を見て判断

### 4.4 ホスティング
- **Platform**: Vercel (無料プラン)
- **ストレージ**: Vercel Blob Storage (無料枠内)

### 4.5 開発ツール
- **パッケージマネージャー**: npm
- **Linter**: ESLint
- **Formatter**: Prettier
- **Git**: GitHub

---

## 5. 制約事項

### 5.1 技術的制約
- **C-001**: 無料 API の利用制限内での運用
- **C-002**: Vercel 無料プランの制限 (100GB 帯域幅/月、関数実行時間 10 秒)
- **C-003**: サーバーサイドでの画像保存は行わない (ストレージ節約)

### 5.2 ビジネス制約
- **C-004**: 開発・運用コストは無料範囲内
- **C-005**: ユーザー認証・データベースは初期実装しない

### 5.3 法的制約
- **C-006**: 各画像検索 API の利用規約遵守
- **C-007**: 画像の著作権表示（各APIのガイドライン準拠）
  - Unsplash: 写真家クレジット表示推奨
  - Pexels: クレジット表示推奨
  - Pixabay: クレジット不要だが推奨

---

## 6. 成功指標 (KPI)

### 6.1 定量指標
- **KPI-001**: 月間ユニークユーザー数: 100 人以上 (3 ヶ月後)
- **KPI-002**: 画像生成成功率: 95% 以上
- **KPI-003**: ページ離脱率: 50% 以下

### 6.2 定性指標
- **KPI-004**: ユーザーからのフィードバック収集
- **KPI-005**: GitHub での Star 数

---

## 7. スコープ外

以下は本プロジェクトのスコープ外とする:

- ユーザー認証・ログイン機能
- データベース連携
- 独自画像のアップロード機能
- 動画への LGTM 合成
- 有料プランの提供
- ネイティブアプリ開発

---

## 8. リスク管理

| リスク ID | リスク内容 | 影響度 | 発生確率 | 対策 |
|----------|----------|--------|---------|------|
| R-001 | 画像検索 API の利用制限超過 | 高 | 中 | 複数API併用、レート制限監視、キャッシュ戦略 |
| R-002 | Vercel 無料プランの上限到達 | 中 | 低 | トラフィック監視、CDN 活用 |
| R-003 | ブラウザ互換性問題 | 中 | 中 | クロスブラウザテスト実施 |
| R-004 | API キーの漏洩 | 高 | 低 | 環境変数管理、.gitignore 設定 |
| R-005 | 特定API障害時のサービス停止 | 中 | 低 | フォールバック機能、複数API対応 |

---

## 9. マイルストーン

### Phase 1: MVP開発・リリース

| フェーズ | 期間 | 成果物 |
|---------|------|--------|
| 1-1: 設計 | Week 1 | 設計ドキュメント完成 |
| 1-2: 基本機能開発 | Week 2-3 | Unsplash/Pexels/Pixabay対応、LGTM生成機能 |
| 1-3: テスト | Week 4 | テスト完了、バグ修正 |
| 1-4: リリース | Week 5 | 本番環境デプロイ |

### Phase 2: 機能拡張（利用状況を見て判断）

| フェーズ | 条件 | 成果物 |
|---------|------|--------|
| 2-1: Google検索対応検討 | MAU 100人以上達成後 | Google Custom Search API 統合 |
| 2-2: 追加機能開発 | ユーザーフィードバック次第 | カスタムテキスト、お気に入り機能など |

---

## 10. 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| プロダクトオーナー | - | - | - |
| 開発リーダー | - | - | - |

---

## 改定履歴

| バージョン | 日付 | 変更者 | 変更内容 |
|----------|------|--------|---------|
| 1.0 | 2025-11-08 | Claude | 初版作成 |
| 1.1 | 2025-11-08 | Claude | 複数画像検索API対応を追加 |
| 1.2 | 2025-11-08 | Claude | Phase方式に変更（Phase1: Unsplash/Pexels/Pixabay、Phase2: Google検索） |
