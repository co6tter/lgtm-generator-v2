# UI/UX 設計書

**バージョン**: 1.0
**作成日**: 2025-11-08
**プロジェクト名**: LGTM Generator v2

---

## 1. デザインコンセプト

### 1.1 デザイン原則
- **シンプル**: 3ステップで完結する直感的なUI
- **高速**: ローディング時間を最小化、即座にフィードバック
- **アクセシブル**: キーボード操作対応、WCAG 2.1 Level A 準拠
- **レスポンシブ**: モバイル・タブレット・デスクトップ全対応
- **ダークモード対応**: システム設定に基づく自動切り替え

### 1.2 デザインシステム

#### カラーパレット

**ライトモード:**
```
Primary Color (アクション):
- Primary: #3b82f6 (Blue-500)
- Primary Hover: #2563eb (Blue-600)
- Primary Active: #1d4ed8 (Blue-700)

Secondary Color (背景・枠線):
- Background: #ffffff (White)
- Surface: #f9fafb (Gray-50)
- Border: #e5e7eb (Gray-200)

Text Color:
- Primary Text: #111827 (Gray-900)
- Secondary Text: #6b7280 (Gray-500)
- Placeholder: #9ca3af (Gray-400)

Status Color:
- Success: #10b981 (Green-500)
- Error: #ef4444 (Red-500)
- Warning: #f59e0b (Amber-500)
```

**ダークモード:**
```
Primary Color (アクション):
- Primary: #3b82f6 (Blue-500)
- Primary Hover: #2563eb (Blue-600)
- Primary Active: #1d4ed8 (Blue-700)

Secondary Color (背景・枠線):
- Background: #1f2937 (Gray-800)
- Surface: #111827 (Gray-900)
- Border: #4b5563 (Gray-600)

Text Color:
- Primary Text: #f9fafb (Gray-50)
- Secondary Text: #d1d5db (Gray-300)
- Placeholder: #6b7280 (Gray-500)

Status Color:
- Success: #10b981 (Green-500)
- Error: #ef4444 (Red-500)
- Warning: #f59e0b (Amber-500)
```

#### タイポグラフィ
```
Font Family:
- システムフォント: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif
- 日本語: "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif

Font Size:
- Display: 32px / 2rem (ページタイトル)
- Heading 1: 24px / 1.5rem (セクション見出し)
- Heading 2: 20px / 1.25rem (サブセクション)
- Body: 16px / 1rem (本文)
- Small: 14px / 0.875rem (補足テキスト)
- Caption: 12px / 0.75rem (キャプション)

Font Weight:
- Bold: 700 (見出し、ボタン)
- Semibold: 600 (強調)
- Regular: 400 (本文)
```

#### スペーシング
```
- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- 2xl: 48px
```

#### ボーダー半径
```
- sm: 4px (入力フィールド)
- md: 8px (カード、ボタン)
- lg: 12px (モーダル)
- full: 9999px (丸ボタン)
```

---

## 2. ユーザーフロー

### 2.1 メインフロー

```
[ランディング]
    ↓
[検索キーワード入力]
    ↓
[検索ソース選択] ← タブ切り替え可能
    ↓
[検索実行]
    ↓
[画像一覧表示] ← ページネーション
    ↓
[画像選択]
    ↓
[LGTM プレビュー生成]
    ↓
[アクション選択]
    ├─ マークダウンコピー
    └─ 画像ダウンロード
    ↓
[完了通知]
```

### 2.2 エラーハンドリングフロー

```
[検索実行]
    ↓
[API エラー発生]
    ↓
[エラーメッセージ表示]
    ├─ API レート制限超過 → 「しばらくお待ちください」
    ├─ ネットワークエラー → 「接続を確認してください」
    └─ その他エラー → 「再度お試しください」
    ↓
[リトライ or 検索ソース変更]
```

---

## 3. 画面設計

### 3.1 画面一覧

| 画面ID | 画面名 | 説明 |
|--------|--------|------|
| SC-01 | トップページ | 検索フォーム・説明 |
| SC-02 | 検索結果ページ | 画像一覧・ページネーション |
| SC-03 | プレビューモーダル | LGTM 画像プレビュー・アクション |
| SC-04 | エラー表示 | エラーメッセージ・リトライ |

---

## 4. ワイヤーフレーム

### 4.1 SC-01: トップページ（デスクトップ）

```
┌─────────────────────────────────────────────────────────────┐
│  [LGTM Generator]                              [GitHub Icon] │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│                    LGTM Generator                             │
│              簡単に LGTM 画像を生成しよう                      │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  🔍  検索キーワードを入力...                          │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  [ 写真 ] [ イラスト ]                   ← タブ               │
│                                                               │
│  [      検索      ]  ← ボタン                                │
│                                                               │
│  ─────────────────────────────────────────────────────────  │
│                                                               │
│  使い方:                                                      │
│  1. キーワードで画像を検索                                    │
│  2. お好きな画像を選択                                        │
│  3. LGTM 画像をコピー or ダウンロード                         │
│                                                               │
│  対応検索ソース: Unsplash / Pexels / Pixabay                  │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 SC-01: トップページ（モバイル）

```
┌───────────────────────┐
│ [≡] LGTM Generator    │
├───────────────────────┤
│                       │
│   LGTM Generator      │
│   簡単に LGTM 画像を   │
│   生成しよう          │
│                       │
│ ┌───────────────────┐ │
│ │ 🔍 キーワード...  │ │
│ └───────────────────┘ │
│                       │
│ [ 写真 ] [ イラスト ] │
│                       │
│ ┌───────────────────┐ │
│ │      検索         │ │
│ └───────────────────┘ │
│                       │
│ 使い方:               │
│ 1. 画像検索           │
│ 2. 画像選択           │
│ 3. コピー/DL          │
│                       │
└───────────────────────┘
```

### 4.3 SC-02: 検索結果ページ（デスクトップ）

```
┌─────────────────────────────────────────────────────────────┐
│  [LGTM Generator]                              [GitHub Icon] │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  🔍  cat                                          [×]  │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  [ 写真 ] [ イラスト ]         検索結果: 120件               │
│                                                               │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │             │ │             │ │             │           │
│  │   Image 1   │ │   Image 2   │ │   Image 3   │           │
│  │             │ │             │ │             │           │
│  │             │ │             │ │             │           │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
│  Photo by XXX   Photo by YYY   Photo by ZZZ                 │
│                                                               │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │             │ │             │ │             │           │
│  │   Image 4   │ │   Image 5   │ │   Image 6   │           │
│  │             │ │             │ │             │           │
│  │             │ │             │ │             │           │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
│  Photo by AAA   Photo by BBB   Photo by CCC                 │
│                                                               │
│              [<] [ 1 ] [ 2 ] [ 3 ] ... [10] [>]              │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

### 4.4 SC-03: プレビューモーダル（デスクトップ）

```
┌─────────────────────────────────────────────────────────────┐
│                                                         [×]   │
│                                                               │
│                 ┌─────────────────────┐                      │
│                 │                     │                      │
│                 │                     │                      │
│                 │       LGTM          │ ← 画像 + テキスト     │
│                 │                     │                      │
│                 │                     │                      │
│                 └─────────────────────┘                      │
│                                                               │
│            Photo by John Doe on Unsplash                     │
│                                                               │
│          ┌─────────────────┐  ┌─────────────────┐           │
│          │  📋 マークダウン  │  │  💾 ダウンロード │           │
│          │     コピー       │  │                 │           │
│          └─────────────────┘  └─────────────────┘           │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

### 4.5 SC-04: エラー表示

```
┌─────────────────────────────────────────────────────────────┐
│  [LGTM Generator]                              [GitHub Icon] │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│                    ⚠️                                         │
│                                                               │
│              エラーが発生しました                              │
│                                                               │
│        API のリクエスト制限に達しました。                      │
│        しばらく経ってから再度お試しください。                  │
│                                                               │
│              [ もう一度検索する ]                             │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

---

## 5. コンポーネント設計

### 5.1 コンポーネント一覧

| コンポーネント名 | 説明 | Props |
|-----------------|------|-------|
| `Header` | ヘッダー（ロゴ、GitHubリンク） | - |
| `SearchBar` | 検索入力フォーム | `onSearch`, `defaultValue` |
| `TabSelector` | 検索ソースタブ切り替え | `tabs`, `activeTab`, `onTabChange` |
| `ImageGrid` | 画像グリッド表示 | `images`, `onImageClick` |
| `ImageCard` | 画像カード | `image`, `onClick` |
| `Pagination` | ページネーション | `currentPage`, `totalPages`, `onPageChange` |
| `PreviewModal` | LGTM プレビューモーダル | `image`, `onClose`, `onCopy`, `onDownload` |
| `Button` | 汎用ボタン | `variant`, `size`, `onClick`, `children` |
| `ErrorMessage` | エラーメッセージ | `message`, `onRetry` |
| `LoadingSpinner` | ローディング表示 | `size` |

### 5.2 コンポーネント階層

```
App
├─ Header
├─ SearchPage
│  ├─ SearchBar
│  ├─ TabSelector
│  └─ Button (検索ボタン)
├─ ResultsPage
│  ├─ SearchBar
│  ├─ TabSelector
│  ├─ ImageGrid
│  │  └─ ImageCard (×N)
│  └─ Pagination
├─ PreviewModal
│  ├─ LGTMCanvas
│  ├─ Attribution
│  └─ ActionButtons
│     ├─ Button (コピー)
│     └─ Button (ダウンロード)
└─ ErrorMessage
```

---

## 6. インタラクション設計

### 6.1 検索フォーム

**状態**:
- Default: グレーの枠線
- Focus: ブルーの枠線、影付き
- Filled: 黒文字
- Error: 赤枠線

**動作**:
- Enter キー押下で検索実行
- 検索ボタンクリックで検索実行
- 入力中はリアルタイムバリデーション（最低2文字）

### 6.2 タブセレクター

**状態**:
- Active: 背景ブルー、白文字
- Inactive: 背景グレー、グレー文字
- Hover: 背景少し濃く

**動作**:
- クリックでタブ切り替え
- 切り替え時にアニメーション（フェード）

### 6.3 画像カード

**状態**:
- Default: 白背景
- Hover: 影が濃くなる、スケール 1.02
- Loading: スケルトン表示

**動作**:
- クリックでプレビューモーダル表示
- 画像遅延読み込み（Lazy Loading）

### 6.4 プレビューモーダル

**表示アニメーション**:
- フェードイン（0.2s）
- 背景オーバーレイ（半透明黒）

**動作**:
- ESC キーで閉じる
- 背景クリックで閉じる
- ×ボタンクリックで閉じる
- マークダウンコピー → 成功トースト表示
- ダウンロード → ファイル保存ダイアログ

### 6.5 ボタン

**Primary ボタン**:
- Default: 青背景、白文字
- Hover: 少し濃い青
- Active: さらに濃い青
- Disabled: グレー背景、操作不可

**Secondary ボタン**:
- Default: 白背景、青枠線、青文字
- Hover: 薄い青背景
- Active: 少し濃い青背景

---

## 7. レスポンシブデザイン

### 7.1 ブレークポイント

```
- Mobile: 0 - 639px
- Tablet: 640px - 1023px
- Desktop: 1024px以上
```

### 7.2 画像グリッド

**Desktop (1024px以上)**:
- 3カラムグリッド
- Gap: 24px
- 画像サイズ: 約 300px × 300px

**Tablet (640px - 1023px)**:
- 2カラムグリッド
- Gap: 16px
- 画像サイズ: 約 280px × 280px

**Mobile (639px以下)**:
- 1カラムグリッド
- Gap: 12px
- 画像サイズ: 100% width

### 7.3 モーダル

**Desktop**:
- 幅: 800px
- 高さ: 自動（最大90vh）
- 中央配置

**Mobile**:
- 幅: 100%
- 高さ: 100%
- 全画面表示

---

## 8. アクセシビリティ

### 8.1 キーボード操作

| 操作 | 機能 |
|------|------|
| Tab | フォーカス移動 |
| Enter | 検索実行、ボタン押下、画像選択 |
| Escape | モーダルを閉じる |
| Arrow Keys | ページネーション移動 |

### 8.2 スクリーンリーダー対応

- `aria-label` 属性を全ボタンに追加
- `alt` 属性を全画像に追加
- `role` 属性でセマンティクス明示
- フォーカス順序の最適化

### 8.3 カラーコントラスト

- WCAG AA 基準準拠
- テキストと背景のコントラスト比 4.5:1 以上
- ボタンと背景のコントラスト比 3:1 以上

---

## 9. アニメーション

### 9.1 トランジション

```
- フェード: 200ms ease-in-out
- スライド: 300ms ease-out
- スケール: 200ms ease-in-out
```

### 9.2 ローディング

- 検索中: スピナー表示（中央）
- 画像読み込み中: スケルトン表示
- 処理中: ボタンに小さなスピナー

### 9.3 フィードバック

- コピー成功: 緑色トースト（右上、3秒表示）
- ダウンロード成功: 緑色トースト（右上、3秒表示）
- エラー: 赤色トースト（右上、5秒表示）

---

## 10. パフォーマンス最適化

### 10.1 画像最適化

- サムネイル: WebP 形式、300x300px
- プレビュー: WebP 形式、800x800px
- 遅延読み込み（Intersection Observer）
- プレースホルダー表示

### 10.2 コード分割

- ルートベースのコード分割
- モーダルの遅延読み込み
- 画像処理ライブラリの動的インポート

### 10.3 キャッシュ戦略

- 検索結果を5分間キャッシュ（SWR）
- 画像URLをローカルストレージにキャッシュ
- API レスポンスの重複リクエスト防止

---

## 11. プロトタイプリンク

Phase 1 完了後に追加予定:
- Figma デザイン: TBD
- インタラクティブプロトタイプ: TBD

---

## 改定履歴

| バージョン | 日付 | 変更者 | 変更内容 |
|----------|------|--------|---------|
| 1.0 | 2025-11-08 | Claude | 初版作成 |
| 1.1 | 2025-11-10 | Claude | ダークモード対応のカラーパレット追加 |
